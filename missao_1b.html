<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A.I.D. - Servidor</title>
    <style>
        body {
            background-color: #0d0d0d;
            color: #00ff41;
            font-family: 'Courier New', Courier, monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 10px;
            box-sizing: border-box;
        }

        #interface-servidor {
            width: 100%;
            max-width: 650px; /* Adapt√°vel */
            border: 2px solid #00ff41;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 0 15px rgba(0, 255, 65, 0.2);
            box-sizing: border-box;
        }

        h2 { margin-top: 0; border-bottom: 1px solid #003b00; padding-bottom: 10px; font-size: 20px; }

        #display-info {
            background-color: #001a00;
            color: #fff;
            padding: 10px;
            border: 1px dashed #00ff41;
            margin-bottom: 20px;
            font-size: 16px;
        }

        /* Container flex√≠vel para pastas no celular */
        #container-pastas {
            display: flex;
            justify-content: center;
            flex-wrap: wrap; /* Permite que pastas caiam para linha de baixo */
            gap: 15px;
            margin-top: 20px;
        }

        .pasta {
            width: 60px; /* Menor para caber no celular */
            height: 80px;
            background-color: #000;
            border: 2px solid #00ff41;
            border-radius: 5px;
            position: relative;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: #00ff41;
        }
        .pasta::before {
            content: ''; position: absolute; top: -6px; left: -2px;
            width: 25px; height: 6px; background-color: #000;
            border: 2px solid #00ff41; border-bottom: none; border-radius: 4px 4px 0 0;
        }

        .pasta-vazia { border-color: #ff3333 !important; color: #ff3333 !important; }
        .pasta-vazia::before { border-color: #ff3333 !important; }
        .pasta-prova { border-color: #ffff00 !important; color: #ffff00 !important; background-color: #333300; }
        .pasta-prova::before { border-color: #ffff00 !important; }

        #area-pergunta { display: none; margin-top: 20px; padding: 10px; border: 1px solid #ff3333; }
        
        button {
            background-color: #000; color: #00ff41; border: 1px solid #00ff41;
            padding: 10px; margin: 5px; cursor: pointer; font-weight: bold;
            width: 100%; max-width: 300px;
        }

        #btn-proxima-fase {
            display: none; background-color: #fff; color: #000; margin-top: 20px; width: 100%;
        }

        #agente-sigma { margin-top: 20px; color: #ccffcc; border-top: 1px dashed #00ff41; padding-top: 10px; font-size: 14px; }
        .destaque-amarelo { color: #ffff00; font-weight: bold; }
    </style>
</head>
<body>

    <div id="interface-servidor">
        <h2>üìÇ SERVIDOR CRIPTOGRAFADO</h2>
        <div id="display-info">
            OBJETIVO: Localizar ARQUIVO DE DADOS.<br>
            <small>5 Arquivos. 3 Vazios. 2 √çntegros.</small>
        </div>

        <div id="container-pastas"></div>

        <div id="area-pergunta">
            <p style="color:#ff3333">ARQUIVO DELETADO!</p>
            <p>A chance de achar os dados no pr√≥ximo clique mudou?</p>
            <button onclick="responder('mudou')">SIM, MUDOU (Aumentou)</button>
            <button onclick="responder('igual')">N√ÉO, √â IGUAL</button>
        </div>

        <button id="btn-proxima-fase" onclick="irProximaFase()">PROSSEGUIR PARA PR√ìXIMA FASE >></button>

        <div id="agente-sigma">
            <strong>üïµÔ∏è AGENTE SIGMA:</strong>
            <span id="fala-sigma">Escolha um pacote de dados para abrir.</span>
        </div>
    </div>

    <script>
        var pastas = [0, 0, 0, 1, 1];
        pastas.sort(() => Math.random() - 0.5);
        var jogoTravado = false;

        function desenharPastas() {
            var container = document.getElementById("container-pastas");
            container.innerHTML = ""; 
            for (let i = 0; i < pastas.length; i++) {
                let divPasta = document.createElement("div");
                divPasta.className = "pasta";
                divPasta.innerText = "?";
                divPasta.id = "pasta-" + i;
                divPasta.onclick = function() { abrirPasta(i); };
                container.appendChild(divPasta);
            }
        }

        function abrirPasta(index) {
            if (jogoTravado) return;
            var conteudo = pastas[index];
            var divPasta = document.getElementById("pasta-" + index);

            if (conteudo === 1) {
                // ACERTOU
                divPasta.className = "pasta pasta-prova";
                divPasta.innerText = "‚úì";
                document.getElementById("display-info").innerHTML = "<span class='destaque-amarelo'>DOWNLOAD CONCLU√çDO!</span>";
                document.getElementById("fala-sigma").innerText = "Evid√™ncia segura. Miss√£o cumprida.";
                
                // MOSTRA BOT√ÉO DE PROSSEGUIR
                document.getElementById("btn-proxima-fase").style.display = "inline-block";
                jogoTravado = true;

            } else {
                // ERROU
                divPasta.className = "pasta pasta-vazia";
                divPasta.innerText = "X";
                document.getElementById("display-info").innerHTML = "<span style='color:#ff3333'>ERRO 404: Vazio.</span>";
                jogoTravado = true;
                setTimeout(function() {
                    divPasta.style.visibility = "hidden"; // Pasta some
                    mostrarPerguntaPedagogica();
                }, 800);
            }
        }

        function mostrarPerguntaPedagogica() {
            document.getElementById("area-pergunta").style.display = "block";
            document.getElementById("fala-sigma").innerText = "Protocolo de seguran√ßa: Responda para continuar.";
        }

        function responder(resposta) {
            if (resposta === 'mudou') {
                document.getElementById("display-info").innerHTML = "L√ìGICA VALIDADA.";
                document.getElementById("display-info").style.color = "#00ff41";
                document.getElementById("fala-sigma").innerHTML = "Correto! Evento Dependente: menos pastas = maior chance.";
                document.getElementById("area-pergunta").style.display = "none";
                jogoTravado = false; 
            } else {
                document.getElementById("fala-sigma").innerText = "Errado. Se deletamos um arquivo, o total diminuiu. A fra√ß√£o mudou.";
            }
        }
        function irProximaFase() { window.location.href = "missao_2.html"; }
        desenharPastas();
    </script>
    <script src="footer.js"></script>

</body>
</html>
