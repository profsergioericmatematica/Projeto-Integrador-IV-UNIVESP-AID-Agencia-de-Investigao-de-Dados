<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A.I.D. - Avalia√ß√£o Conceitual</title>
    <style>
        body {
            background-color: #0d0d0d;
            color: #00ff41;
            font-family: 'Courier New', Courier, monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 10px;
            box-sizing: border-box;
            overflow: hidden;
        }

        #interface-jogo {
            width: 100%;
            max-width: 700px;
            border: 2px solid #00ff41;
            padding: 20px;
            border-radius: 10px;
            background-color: #001a00;
            text-align: center;
            position: relative;
        }

        h2 { border-bottom: 1px dashed #00ff41; padding-bottom: 10px; margin-top: 0; }

        #grid-dados {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
            min-height: 150px;
        }

        .pacote {
            width: 50px; height: 50px;
            background-color: #003300;
            border: 2px solid #005500;
            border-radius: 5px;
            cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            font-size: 20px;
            transition: transform 0.2s;
        }
        .pacote:hover { transform: scale(1.1); border-color: #00ff41; }
        
        .pacote.aberto { background-color: #005500; border-color: #fff; cursor: default; }

        /* MODAL DE AVALIA√á√ÉO */
        #modal-avaliacao {
            display: none;
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.98);
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            z-index: 100;
        }

        .box-pergunta {
            width: 90%;
            max-width: 500px;
            background: #002200;
            border: 2px solid #ffff00;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(255, 255, 0, 0.2);
        }

        .opcoes { display: flex; flex-direction: column; gap: 15px; margin-top: 20px; }
        
        .btn-opcao {
            padding: 15px;
            background: #000;
            border: 1px solid #00ff41;
            color: #00ff41;
            cursor: pointer;
            font-family: inherit;
            font-weight: bold;
            font-size: 14px;
            text-align: left;
            transition: 0.3s;
        }
        .btn-opcao:hover { background: #00ff41; color: #000; }

        #agente-box { margin-top: 20px; border-top: 1px dashed #00ff41; padding-top: 10px; color: #ccffcc; font-size: 14px; min-height: 40px;}
    </style>
</head>
<body>

    <script>const inicioFase = Date.now();</script>

    <div id="interface-jogo">
        <div style="display:flex; justify-content:space-between; font-size:12px;">
            <span>üì° INTERCEPTA√á√ÉO</span>
            <span>ALVO: CONCEITO</span>
        </div>

        <h2>CALIBRAGEM DE PROBABILIDADE</h2>
        <p style="font-size: 14px; color: #aaa;">
            Sistema com Reposi√ß√£o Autom√°tica.<br>
            Clique em qualquer pacote para iniciar o diagn√≥stico.
        </p>

        <div id="grid-dados">
            </div>

        <div id="agente-box">
            <strong>üïµÔ∏è AGENTE SIGMA:</strong>
            <span id="msg-sigma">Precisamos testar seu conhecimento antes da invas√£o real. Clique em um pacote.</span>
        </div>

        <div id="modal-avaliacao">
            <div class="box-pergunta">
                <h3 style="color: #ffff00; margin-top:0; text-align: center;">üõë VERIFICA√á√ÉO DE L√ìGICA</h3>
                <p>O sistema acabou de realizar um <strong>RESET (Reposi√ß√£o)</strong>. Todas as pe√ßas voltaram ao estado inicial.</p>
                <p><strong>PERGUNTA DO AGENTE:</strong><br>A probabilidade de encontrar a senha na pr√≥xima tentativa √© maior, menor ou igual √† anterior?</p>
                
                <div class="opcoes">
                    <button class="btn-opcao" onclick="avaliarResposta('maior')">
                        [A] MAIOR (Pois j√° gastei uma tentativa errada)
                    </button>
                    <button class="btn-opcao" onclick="avaliarResposta('menor')">
                        [B] MENOR (O sistema ficou mais dif√≠cil)
                    </button>
                    <button class="btn-opcao" onclick="avaliarResposta('igual')">
                        [C] IGUAL (Eventos independentes n√£o t√™m mem√≥ria)
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let bloqueado = false;

        // Gera 10 pacotes visuais
        function gerarPacotes() {
            const grid = document.getElementById('grid-dados');
            grid.innerHTML = "";
            for (let i = 0; i < 10; i++) {
                let div = document.createElement('div');
                div.className = 'pacote';
                div.innerHTML = '?';
                div.onclick = () => acionarEvento(div);
                grid.appendChild(div);
            }
        }

        function acionarEvento(elemento) {
            if (bloqueado) return;
            bloqueado = true;
    
            // Visualmente marca o pacote
            elemento.className = "pacote aberto";
            elemento.innerText = "!";

            // Refer√™ncia ao elemento de texto
            const sigmaMsg = document.getElementById('msg-sigma');
    
            // Configura√ß√£o do Cron√¥metro
            let tempoRestante = 4;

            // Define a mensagem inicial imediatamente
            sigmaMsg.innerHTML = `Processando... Sistema solicitando verifica√ß√£o te√≥rica.<br>
            <span id="timer-display" style="color: #ffff00; font-weight: bold; font-size: 16px;">[ AGUARDE: ${tempoRestante}s ]</span>`;
    
            // Cria o intervalo que roda a cada 1 segundo (1000ms)
            const contagem = setInterval(() => {
                tempoRestante--; // Diminui 1 segundo

                if (tempoRestante >= 0) {
                    // Se ainda n√£o acabou, atualiza o n√∫mero na tela
                    const display = document.getElementById('timer-display');
                    if (display) {
                        display.innerText = `[ AGUARDE: ${tempoRestante}s ]`;
                    }
                } else {
                    // Se o tempo acabou (passou do 0), para o loop e abre o modal
                    clearInterval(contagem);
                    document.getElementById('modal-avaliacao').style.display = 'flex';
                }
            }, 1000);
        }

        function avaliarResposta(resposta) {
            const modal = document.getElementById('modal-avaliacao');
            const sigma = document.getElementById('msg-sigma');

            if (resposta === 'igual') {
                // --- SUCESSO REAL (CONCEITUAL) ---
                registrarLog("Sucesso Conceitual: Compreendeu Eventos Independentes.");
                
                modal.style.display = 'none';
                document.getElementById('grid-dados').innerHTML = "<h1 style='color:#ffff00; font-size:40px;'>üîì</h1>";
                
                sigma.innerHTML = "<span style='color:#ffff00'>CORRETO!</span> Em eventos com reposi√ß√£o, a chance √© constante.<br>Acesso √† pr√≥xima fase liberado.";
                
                // Bot√£o para avan√ßar
                let btn = document.createElement("button");
                btn.innerText = "IR PARA FASE 1B >>";
                btn.style.cssText = "margin-top:15px; padding:15px; background:#00ff41; border:none; font-weight:bold; cursor:pointer;";
                btn.onclick = () => window.location.href = "missao_1b.html";
                document.getElementById('interface-jogo').appendChild(btn);

            } else {
                // --- ERRO CONCEITUAL ---
                let erroMsg = resposta === 'maior' ? "Achou que a chance aumentava (Fal√°cia do Jogador)." : "Achou que a chance diminu√≠a.";
                registrarLog("[MISS√ÉO 1A] Erro Conceitual: " + erroMsg, "erro");
                
                alert("L√≥gica Incorreta! Se houve REPOSI√á√ÉO (Reset), o cen√°rio √© id√™ntico ao anterior. A matem√°tica n√£o mudou. Tente novamente.");
                
                // Reinicia para tentar de novo
                modal.style.display = 'none';
                bloqueado = false;
                gerarPacotes();
                sigma.innerText = "Tente novamente. Concentre-se no conceito de 'Reposi√ß√£o'.";
            }
        }

        // LOG (Padr√£o)
        function registrarLog(texto, tipo = "info") {
            let tempoDecorrido = ((Date.now() - inicioFase) / 1000).toFixed(1);
            let linha = "[MISS√ÉO 1A | " + tempoDecorrido + "s] " + texto;
            let logAtual = localStorage.getItem('AID_Relatorio') || "";
            localStorage.setItem('AID_Relatorio', logAtual + linha + "\n");
            if (tipo === "erro") {
                let t = parseInt(localStorage.getItem('AID_TotalErros') || 0);
                localStorage.setItem('AID_TotalErros', t + 1);
            }
        }

        gerarPacotes();
    </script>
    <script src="footer.js"></script>
</body>
</html>
